<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manage Projects - Admin</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="admin-page">
    <div class="admin-container">
        <%- include('../partials/admin-sidebar') %>
        
        <div class="admin-content">
            <h2 class="section-title">Manage Projects</h2>

            <!-- Add Project Form -->
            <div class="admin-card">
                <h3>Add New Project</h3>
                <form action="/admin/projects" method="POST" enctype="multipart/form-data">
                    <div class="form-group">
                        <label>Title</label>
                        <input type="text" name="title" required>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea name="description" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Tech Stack (comma separated)</label>
                        <input type="text" name="techStack" placeholder="e.g. React, Node.js, MongoDB">
                    </div>
                    <div class="form-group">
                        <label>GitHub Link</label>
                        <input type="text" name="githubLink">
                    </div>
                    <div class="form-group">
                        <label>Live Demo Link</label>
                        <input type="text" name="liveDemo">
                    </div>
                    <div class="form-group">
                        <label>Project Image</label>
                        <input type="file" name="image" required>
                    </div>
                    <button type="submit" class="btn">Add Project</button>
                </form>
            </div>

            <!-- Projects List -->
            <div class="grid">
                <% projects.forEach(project => { %>
                    <div class="admin-card">
                        <% if(project.image) { %>
                            <img src="<%= project.image %>" alt="<%= project.title %>" style="width: 100%; height: 150px; object-fit: cover; border-radius: 4px; margin-bottom: 10px;">
                        <% } %>
                        <h4><%= project.title %></h4>
                        <p><%= project.description %></p>
                        <div style="margin: 10px 0;">
                            <% project.techStack.forEach(t => { %>
                                <span style="background: #eee; padding: 2px 5px; font-size: 0.8rem; border-radius: 4px; margin-right: 5px;"><%= t %></span>
                            <% }) %>
                        </div>
                        <div style="margin-bottom: 10px;">
                            <% if(project.githubLink) { %> <a href="<%= project.githubLink %>" target="_blank"><i class="fab fa-github"></i> Code</a> <% } %>
                            <% if(project.liveDemo) { %> <a href="<%= project.liveDemo %>" target="_blank" style="margin-left: 10px;"><i class="fas fa-external-link-alt"></i> Demo</a> <% } %>
                        </div>
                        <form action="/admin/projects/<%= project._id %>?_method=DELETE" method="POST" onsubmit="return confirm('Delete this project?');">
                            <button type="submit" class="btn btn-danger" style="width: 100%;">Delete</button>
                        </form>
                    </div>
                <% }) %>
            </div>
        </div>
    </div>
</body>
</html>
